<form>
    <mat-form-field appearance="outline">
        <span matPrefix
              class="px-2">
            <i-feather
                    class="text-gray-600"
                    name="search">
            </i-feather>
            </span>

        <input matInput
               id="selectedUser"
               aria-label="Users"
               [placeholder]="'Search user'"
               [matAutocomplete]="auto"
               [formControl]="control">

        <mat-autocomplete #auto="matAutocomplete"
                          (optionSelected)="onOptionSelected($event.option.value)"
                          [displayWith]="displayFn">
            <mat-option *rxFor="let user of filteredUsers$" [value]="user" [disabled]="user.disabled">
                <mat-spinner *rxIf="isLoading"
                             diameter="30">
                </mat-spinner>

                <ng-container *rxIf="!isLoading">
                    <vyf-user-list-item [user]="user">
                        <i-feather *rxIf="user.disabled"
                                   suffix-content
                                   class="text-green-700"
                                   name="user-check">
                        </i-feather>
                    </vyf-user-list-item>
                </ng-container>

            </mat-option>
        </mat-autocomplete>
    </mat-form-field>

    <ul class="max-w-md divide-y divide-gray-200">
        <ng-container *rxFor="let user of selectedUsers$; let index = index;">
            <li class="py-3 sm:pb-4">
                <vyf-user-list-item [user]="user">
                    <button mat-flat-button
                            suffix-content
                            type="button"
                            (click)="removeSelectedUser(index)">
                        <i-feather class="text-red-700 align-top"
                                   name="x-octagon">
                        </i-feather>
                    </button>
                </vyf-user-list-item>
            </li>
        </ng-container>
    </ul>
</form>
